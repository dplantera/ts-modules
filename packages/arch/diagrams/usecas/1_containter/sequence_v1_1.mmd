%%@formatter:off
sequenceDiagram
    User ->> Intent: change field
    activate User
        Intent -->> Intent: intentChanged: Intent
        User ->> Variant: getVariants(intentId)
        activate Variant
            Variant ->> Intent: getIntent(intentId): Intent
            Variant -->> User: getVariants: Variant[]
        deactivate Variant
        User ->> Variant: calculateVariant(variantId)
            activate Variant
            Variant ->> Variant: getVariant(variantId)
            Variant ->> Intent: getIntent(intentId)
            Variant ->> Variant: ğŸ”¥ createFinancingRequest(Intent, Variant)
            Variant ->> Calculation: calculate(ğŸ”¥ $financingRequest):CommandId
            activate Calculation
                Calculation -->> Variant: calculateVariant: CommandId
                Variant -->> User: calculateVariant: CommandId
            deactivate Variant
                User ->> Calculation: getResults(CommandId)
                Calculation -->> User: getResults(CommandId): Result[]
            deactivate Calculation
        User ->> Offer: createOffer(intentId, variantId, calculationId)
        activate Offer
            Offer ->> Intent: getIntent(intentId): ğŸ”¥Intent
            Offer ->> Variant: getVariant(variantId): ğŸ”¥Variant
            Offer ->> Calculation: getCalculation(calculationId): ğŸ”¥Calculation
            Offer ->> Offer: createOffer(Variant): Offer
            Offer ->> Offer: createRevision(Intent, Result): Offer
            Offer -->> User: createOffer: Offer
        deactivate Offer
        User ->> Offer: acceptOffer(offerId)
        activate Offer
            Offer ->> Offer: changeStatus
            Offer -->> User: acceptOffer: OfferId
        deactivate Offer
        User ->> Offer: submit(offerId)
        activate Offer
            Offer ->> Intent: getIntent(intentId): Intent
            Offer ->> Offer: ğŸ”¥ validateForSubmission(Offer, Revision, Result)
            Offer ->> Offer: ğŸ”¥ createSubmissionRequest(Offer, Revision, Result)
            Offer ->> Submission: createSubmission(ğŸ”¥ $submissionRequest)
        deactivate Offer
    deactivate User
